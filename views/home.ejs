<link rel="stylesheet" href="/css/home.css">
<body>
<input type="hidden" id="currentUserId" value="<%= currentUser ? currentUser._id : 'not_logged_in' %>" />
<div class="content">
    <% if((searchType === "post")) { %>
        <% if(!posts || (posts.length === 0)) { %>
            <div>Keine Posts gefunden</div>
        <% } else { %>
            <div class="masonryGrid">
                <% posts.forEach(post => { %>
                    <%- include('partials/homePostCard.ejs', {post: post}) %>
                <% }) %>
            </div>
        <% } %>
    <% } %>
    <% if((searchType === "user")) { %>
        <% if(!users || (users.length === 0)) { %>
            <div>Keine User gefunden</div>
        <% } else { %>
            <% users.forEach(user => { %>
                <%- include('partials/userCard.ejs', {user: user}) %>
            <% }) %>
        <% } %>
    <% } %>
</div>
<script>
    function favorite(postId) {
        var userId = document.getElementById('currentUserId').value;
        $.post(`post/${postId}/favorite?format=json`, (post) => {
            $(`#post-favorite-count-${postId}`).html(post.favoritedByUsers.length);

            if(post.favoritedByUsers.includes(userId)){
                $(`#post-favorite-button-${postId}`).attr('fill', '#EAE34B')
            } else {
                $(`#post-favorite-button-${postId}`).attr('fill', 'none')
            }
        });
    }
</script>
</body>