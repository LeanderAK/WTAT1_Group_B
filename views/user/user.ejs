<link rel="stylesheet" href="/css/user.css">
<div id="userContainer">
    <div id="topContainer">
        <h1><%= user.username %></h1>
        <% if (loggedIn && (currentUser._id.equals(user._id) || currentUser.isAdmin)) { %>
            <div class="userButtons">
                <a id="logoutButton" href="/logout">Log Out</a>
                <a class="userButton" href=<%= `/user/${user._id}/edit` %>>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                        <g>
                            <circle cx="5" cy="2.75" r="2.25" fill="none" stroke="#000000" stroke-linecap="round"
                                    stroke-linejoin="round"></circle>
                            <path d="M3.5,12.5H.5V11A4.51,4.51,0,0,1,7,7" fill="none" stroke="#000000"
                                  stroke-linecap="round" stroke-linejoin="round"></path>
                            <polygon points="13.5 8.5 8.79 13.21 6.66 13.5 6.96 11.37 11.66 6.66 13.5 8.5" fill="none"
                                     stroke="#000000" stroke-linecap="round" stroke-linejoin="round"></polygon>
                        </g>
                    </svg>
                </a>
                <a class="userButton" id="deleteButton" href=<%= `/user/${user._id}?_method=DELETE` %>>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                        <g>
                            <polyline points="11.5 5.5 10.5 13.5 3.5 13.5 2.5 5.5" fill="none" stroke="currentColor"
                                      stroke-linecap="round" stroke-linejoin="round"></polyline>
                            <line x1="1" y1="3.5" x2="13" y2="3.5" fill="none" stroke="currentColor"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"></line>
                            <path d="M4.46,3.21l0-1.73a1,1,0,0,1,1-1h3a1,1,0,0,1,1,1v2" fill="none"
                                  stroke="currentColor"
                                  stroke-linecap="round" stroke-linejoin="round"></path>
                        </g>
                    </svg>
                </a>
            </div>
        <% } %>
    </div>
    <div id="profileContainer">
        <img id="profilePicture"
             src="data:image/<%= user.profilePicture.contentType %>;base64,<%= user.profilePicture.data.toString('base64') %>"
             alt="profile-picture">
        <div id="numbersInfo">
            <div class="box">
                <div class="number"><%= user.posts.length %></div>
                <div class="label">Posts</div>
            </div>
            <div class="box">
                <div class="number"><%= user.followers.length %></div>
                <div class="label">Followers</div>
            </div>
            <div class="box">
                <div class="number"><%= user.following.length %></div>
                <div class="label">Following</div>
            </div>
        </div>
    </div>
    <div><%= user.email %></div>
    <div>Is Admin: <%= user.isAdmin %></div>
    <div class="masonryGrid">
        <% if(user.posts.length !== 0) { %>
            <% user.posts.forEach(post => { %>
                <div class="card">
                    <img class="cardImage" src=<%= post.img %> alt="card-image"/>
                    <div id="cardContent">
                        <% if (loggedIn && (currentUser._id.equals(user._id) || currentUser.isAdmin)) { %>
                            <div class="postButtons">
                                <a class="postButton" href=<%= `/post/${post._id}/edit` %>>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                                        <g>
                                            <path d="M7.5,9l-3,.54L5,6.5,10.73.79a1,1,0,0,1,1.42,0l1.06,1.06a1,1,0,0,1,0,1.42Z"
                                                  fill="none" stroke="#000000" stroke-linecap="round"
                                                  stroke-linejoin="round"></path>
                                            <path d="M12,9.5v3a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1V3a1,1,0,0,1,1-1h3"
                                                  fill="none"
                                                  stroke="#000000" stroke-linecap="round"
                                                  stroke-linejoin="round"></path>
                                        </g>
                                    </svg>
                                </a>
                                <a class="postButton" id="deleteButton" href=<%= `/post/${post._id}?_method=DELETE` %>>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                                        <g>
                                            <polyline points="11.5 5.5 10.5 13.5 3.5 13.5 2.5 5.5" fill="none"
                                                      stroke="currentColor"
                                                      stroke-linecap="round" stroke-linejoin="round"></polyline>
                                            <line x1="1" y1="3.5" x2="13" y2="3.5" fill="none" stroke="currentColor"
                                                  stroke-linecap="round" stroke-linejoin="round"></line>
                                            <path d="M4.46,3.21l0-1.73a1,1,0,0,1,1-1h3a1,1,0,0,1,1,1v2" fill="none"
                                                  stroke="currentColor" stroke-linecap="round"
                                                  stroke-linejoin="round"></path>
                                        </g>
                                    </svg>
                                </a>
                            </div>
                        <% } %>
                        <h2 id="cardTitle"><%= post.title %></h2>
                        <div id="cardDescription"><%= post.description %></div>
                        <div id="cardButtons">
                            <button id="cardIcon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                                    <path d="M7.49,1.09,9.08,4.3a.51.51,0,0,0,.41.3L13,5.12a.54.54,0,0,1,.3.93L10.77,8.56a.53.53,0,0,0-.16.48l.61,3.53a.55.55,0,0,1-.8.58L7.26,11.48a.59.59,0,0,0-.52,0L3.58,13.15a.55.55,0,0,1-.8-.58L3.39,9a.53.53,0,0,0-.16-.48L.67,6.05A.54.54,0,0,1,1,5.12L4.51,4.6a.51.51,0,0,0,.41-.3L6.51,1.09A.54.54,0,0,1,7.49,1.09Z"
                                          fill="currentColor" stroke="#000000" stroke-linecap="round"
                                          stroke-linejoin="round"></path>
                                </svg>
                            </button>
                            <a id="cardButton" href="/post/<%= post.id %>">Nachmachen</a>
                        </div>
                    </div>
                </div>
        <% })} %>
    </div>
</div>